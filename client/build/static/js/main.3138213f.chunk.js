(this["webpackJsonpinspire-me-chatting"]=this["webpackJsonpinspire-me-chatting"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(31),s=n.n(c),a=(n(72),n(73),n(2)),u=function(){return Object(a.jsx)("header",{className:"header text-center",children:Object(a.jsx)("h2",{children:"Inspire.Me Chatting"})})},o=n(16),i=n(65),j=n(116),l=n(118),d=n(119),b=n(42),m=n(59),f=n.n(m),O=window.location.href,h=function(e,t,n){var c=Object(r.useState)([]),s=Object(o.a)(c,2),a=s[0],u=s[1],i=Object(r.useState)([]),j=Object(o.a)(i,2),l=j[0],d=j[1],m=Object(r.useRef)(null);Object(r.useEffect)((function(){return m.current=f()(O,{query:n}),m.current.onAny((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(e,n)})),e&&m.current.emit("user:add",{username:t,userId:e}),m.current.on("users",(function(e){u(e)})),m.current.emit("message:get"),m.current.on("messages",(function(t){var n=t.map((function(t){return t.userId===e?Object(b.a)(Object(b.a)({},t),{},{currentUser:!0}):t}));d(n)})),function(){return m.current.disconnect()}}),[n,e,t]);return function(e){var t=function(t){var n;return(n="function"===typeof n?e(t):e)&&(t.preventDefault(),t.returnValue=n),n};Object(r.useEffect)((function(){return window.addEventListener("beforeunload",t),function(){return window.removeEventListener("beforeunload",t)}}),[])}((function(){m.current.emit("user:leave",e)})),{users:a,messages:l,sendMessage:function(t){var n=t.messageText,r=t.senderName;m.current.emit("message:add",{userId:e,messageText:n,senderName:r})},removeMessage:function(e){m.current.emit("message:remove",e)}}},x=n(117),v=n(60),g=n.n(v),p=function(e){var t=e.userData,n=e.messages,c=e.removeMessage,s=Object(r.useRef)();return Object(r.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),Object(a.jsxs)("div",{className:"chat__messages overflow-auto",children:[Object(a.jsx)(x.a,{variant:"flush",children:n.map((function(e){return Object(a.jsxs)(x.a.Item,{className:"chat__message-item d-flex justify-content-between p-2",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:e.senderName}),": ",e.messageText]}),(null===t||void 0===t?void 0:t.userId)===e.userId&&Object(a.jsx)("button",{className:"chat__message-del",onClick:function(){return c(e.messageId)},children:"\xd7"}),Object(a.jsx)(g.a,{date:e.createdAt,className:"text-muted"})]},e.messageId)}))}),Object(a.jsx)("span",{ref:s})]})},w=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=function(e,t){var n=Object(r.useState)((function(){var n=window.localStorage.getItem(e);return n?JSON.parse(n):t})),c=Object(o.a)(n,2),s=c[0],a=c[1];return Object(r.useEffect)((function(){var t=JSON.stringify(s);t&&window.localStorage.setItem(e,t)}),[s]),[s,a]}("inspire-me-userData"),u=Object(o.a)(s,2),b=u[0],m=u[1],f=Object(r.useState)("general"),O=Object(o.a)(f,2),x=O[0],v=(O[1],h(null===b||void 0===b?void 0:b.userId,null===b||void 0===b?void 0:b.username,x)),g=v.users,w=v.messages,N=v.sendMessage,_=v.removeMessage,I=Object(r.useState)(""),q=Object(o.a)(I,2),y=q[0],S=q[1],k=Object.values(g).filter((function(e){return e.online})).length;console.log(g);return Object(a.jsx)("div",{className:"chat",children:Object(a.jsxs)("div",{className:"chat__wrapper",children:[!b&&Object(a.jsxs)("div",{className:"chat__login text-center",children:[Object(a.jsx)("p",{children:"Enter your name and start chatting!"}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(l.a.Control,{type:"text",name:"username",id:"username",value:n,onChange:function(e){c(e.target.value)}}),Object(a.jsx)(j.a.Append,{children:Object(a.jsx)(d.a,{variant:"info",onClick:function(){m({username:n,userId:Object(i.a)(8)})},children:"Start Chatting"})})]})]}),Object(a.jsxs)("div",{className:"chat__header",children:[Object(a.jsxs)("p",{className:"m-0",children:["Users online: ",k]}),Object(a.jsx)("h4",{className:"text-center",children:"Real-Time Chat"}),Object(a.jsxs)("p",{className:"m-0",children:["You: ",null===b||void 0===b?void 0:b.username]})]}),Object(a.jsx)(p,{userData:b,messages:w,removeMessage:_}),Object(a.jsx)(l.a,{children:Object(a.jsx)(l.a.Group,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(l.a.Control,{as:"textarea",rows:1,name:"text",id:"text",value:y,onChange:function(e){S(e.target.value)},disabled:!b,style:{resize:"none"}}),Object(a.jsx)(j.a.Append,{children:Object(a.jsx)(d.a,{type:"submit",onClick:function(e){e.preventDefault(),y.trim()&&(N({messageText:y,senderName:b.username}),S(""))},disabled:!b,variant:"info",children:"Send"})})]})})})]})})},N=n(26),_=n(27),I=Object(_.b)({name:"quote",initialState:{randomQuote:null},reducers:{setQuote:function(e,t){e.randomQuote=t.payload},fetchQuote:function(e){}}}),q=I.reducer,y=I.actions,S=y.setQuote,k=y.fetchQuote,C=function(){var e=Object(N.c)((function(e){return e.quote})).randomQuote,t=Object(N.b)();return Object(r.useEffect)((function(){t(k())}),[t]),e?Object(a.jsx)("div",{className:"quote",children:Object(a.jsxs)("div",{className:"quote__wrapper",children:[Object(a.jsx)("h4",{className:"quote__text",children:e.text}),Object(a.jsx)("p",{className:"quote__author",children:e.author}),Object(a.jsx)("button",{className:"quote__btn",onClick:function(){t(k())},children:"click here to get another quote"})]})}):Object(a.jsx)("div",{className:"quote",children:Object(a.jsx)("div",{className:"quote__wrapper",children:Object(a.jsx)("h4",{className:"quote__text",children:"Loading..."})})})},E=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u,{}),Object(a.jsx)(C,{}),Object(a.jsx)(w,{})]})},M=n(63),Q=n(11),A=n(64),D=n(18),T=n.n(D),J=n(19),L=T.a.mark(V),R=T.a.mark(z),U=function(){return fetch("https://type.fit/api/quotes")};function V(){var e,t,n;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(J.b)(U);case 2:return e=r.sent,r.next=5,Object(J.b)((function(){return new Promise((function(t){return t(e.json())}))}));case 5:return t=r.sent,r.next=8,Math.floor(Math.random()*(t.length-1));case 8:return n=r.sent,r.next=11,Object(J.c)(S(t[n]));case 11:case"end":return r.stop()}}),L)}function z(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.d)(k.type,V);case 2:case"end":return e.stop()}}),R)}var B=T.a.mark(F);function F(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.a)([z()]);case 2:case"end":return e.stop()}}),B)}var G=Object(A.a)(),P=Object(Q.c)({quote:q}),Y=Object(_.a)({reducer:P,middleware:[].concat(Object(M.a)(Object(_.c)({thunk:!1})),[G])});G.run(F),s.a.render(Object(a.jsx)(N.a,{store:Y,children:Object(a.jsx)(E,{})}),document.getElementById("root"))},72:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.3138213f.chunk.js.map