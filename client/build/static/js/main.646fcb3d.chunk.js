(this["webpackJsonpinspire-me-chatting"]=this["webpackJsonpinspire-me-chatting"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(31),c=n.n(s),a=(n(72),n(73),n(2)),u=function(){return Object(a.jsx)("header",{className:"header text-center",children:Object(a.jsx)("h2",{children:"Inspire.Me Chatting"})})},i=n(16),o=n(65),j=n(116),d=n(118),l=n(119),b=n(42),m=n(59),O=n.n(m),f=window.location.href,h=function(e,t,n){var s=Object(r.useState)([]),c=Object(i.a)(s,2),a=c[0],u=c[1],o=Object(r.useState)([]),j=Object(i.a)(o,2),d=j[0],l=j[1],m=Object(r.useRef)(null);Object(r.useEffect)((function(){return m.current=O()(f,{query:n}),e&&m.current.emit("user:add",{username:t,userId:e}),m.current.on("users",(function(e){u(e)})),m.current.emit("message:get"),m.current.on("messages",(function(t){var n=t.map((function(t){return t.userId===e?Object(b.a)(Object(b.a)({},t),{},{currentUser:!0}):t}));l(n)})),function(){return m.current.disconnect()}}),[n,e,t]);return function(e){var t=function(t){var n;return(n="function"===typeof n?e(t):e)&&(t.preventDefault(),t.returnValue=n),n};Object(r.useEffect)((function(){return window.addEventListener("beforeunload",t),function(){return window.removeEventListener("beforeunload",t)}}),[])}((function(){m.current.emit("user:leave",e)})),{users:a,messages:d,sendMessage:function(t){var n=t.messageText,r=t.senderName;m.current.emit("message:add",{userId:e,messageText:n,senderName:r})},removeMessage:function(e){m.current.emit("message:remove",e)}}},x=n(117),v=n(60),p=n.n(v),g=function(e){var t=e.userData,n=e.messages,s=e.removeMessage,c=Object(r.useRef)();return Object(r.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),Object(a.jsxs)("div",{className:"chat__messages overflow-auto",children:[Object(a.jsx)(x.a,{variant:"flush",children:n.map((function(e){return Object(a.jsxs)(x.a.Item,{className:"chat__message-item d-flex justify-content-between p-2",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:e.senderName}),": ",e.messageText]}),(null===t||void 0===t?void 0:t.userId)===e.userId&&Object(a.jsx)("button",{className:"chat__message-del",onClick:function(){return s(e.messageId)},children:"\xd7"}),Object(a.jsx)(p.a,{date:e.createdAt,className:"text-muted"})]},e.messageId)}))}),Object(a.jsx)("span",{ref:c})]})},w=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=function(e,t){var n=Object(r.useState)((function(){var n=window.localStorage.getItem(e);return n?JSON.parse(n):t})),s=Object(i.a)(n,2),c=s[0],a=s[1];return Object(r.useEffect)((function(){var t=JSON.stringify(c);t&&window.localStorage.setItem(e,t)}),[c]),[c,a]}("inspire-me-userData"),u=Object(i.a)(c,2),b=u[0],m=u[1],O=Object(r.useState)("general"),f=Object(i.a)(O,2),x=f[0],v=(f[1],h(null===b||void 0===b?void 0:b.userId,null===b||void 0===b?void 0:b.username,x)),p=v.users,w=v.messages,N=v.sendMessage,_=v.removeMessage,I=Object(r.useState)(""),q=Object(i.a)(I,2),S=q[0],y=q[1],k=Object.values(p).filter((function(e){return e.online})).length;return Object(a.jsx)("div",{className:"chat",children:Object(a.jsxs)("div",{className:"chat__wrapper",children:[!b&&Object(a.jsxs)("div",{className:"chat__login text-center",children:[Object(a.jsx)("p",{children:"Enter your name and start chatting!"}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d.a.Control,{type:"text",name:"username",id:"username",value:n,onChange:function(e){s(e.target.value)}}),Object(a.jsx)(j.a.Append,{children:Object(a.jsx)(l.a,{variant:"info",onClick:function(){m({username:n,userId:Object(o.a)(8)})},children:"Start Chatting"})})]})]}),Object(a.jsxs)("div",{className:"chat__header",children:[Object(a.jsxs)("p",{className:"m-0",children:["Users online: ",k]}),Object(a.jsx)("h4",{className:"text-center",children:"Real-Time Chat"}),Object(a.jsxs)("p",{className:"m-0",children:["You: ",null===b||void 0===b?void 0:b.username]})]}),Object(a.jsx)(g,{userData:b,messages:w,removeMessage:_}),Object(a.jsx)(d.a,{children:Object(a.jsx)(d.a.Group,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d.a.Control,{as:"textarea",rows:1,name:"text",id:"text",value:S,onChange:function(e){y(e.target.value)},disabled:!b,style:{resize:"none"}}),Object(a.jsx)(j.a.Append,{children:Object(a.jsx)(l.a,{type:"submit",onClick:function(e){e.preventDefault(),S.trim()&&(N({messageText:S,senderName:b.username}),y(""))},disabled:!b,variant:"info",children:"Send"})})]})})})]})})},N=n(26),_=n(27),I=Object(_.b)({name:"quote",initialState:{randomQuote:null},reducers:{setQuote:function(e,t){e.randomQuote=t.payload},fetchQuote:function(e){}}}),q=I.reducer,S=I.actions,y=S.setQuote,k=S.fetchQuote,C=function(){var e=Object(N.c)((function(e){return e.quote})).randomQuote,t=Object(N.b)();return Object(r.useEffect)((function(){t(k())}),[t]),e?Object(a.jsx)("div",{className:"quote",children:Object(a.jsxs)("div",{className:"quote__wrapper",children:[Object(a.jsx)("h4",{className:"quote__text",children:e.text}),Object(a.jsx)("p",{className:"quote__author",children:e.author}),Object(a.jsx)("button",{className:"quote__btn",onClick:function(){t(k())},children:"click here to get another quote"})]})}):Object(a.jsx)("div",{className:"quote",children:Object(a.jsx)("div",{className:"quote__wrapper",children:Object(a.jsx)("h4",{className:"quote__text",children:"Loading..."})})})},E=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u,{}),Object(a.jsx)(C,{}),Object(a.jsx)(w,{})]})},M=n(63),Q=n(11),D=n(64),T=n(18),J=n.n(T),A=n(19),L=J.a.mark(V),R=J.a.mark(z),U=function(){return fetch("https://type.fit/api/quotes")};function V(){var e,t,n;return J.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(A.b)(U);case 2:return e=r.sent,r.next=5,Object(A.b)((function(){return new Promise((function(t){return t(e.json())}))}));case 5:return t=r.sent,r.next=8,Math.floor(Math.random()*(t.length-1));case 8:return n=r.sent,r.next=11,Object(A.c)(y(t[n]));case 11:case"end":return r.stop()}}),L)}function z(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)(k.type,V);case 2:case"end":return e.stop()}}),R)}var B=J.a.mark(F);function F(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.a)([z()]);case 2:case"end":return e.stop()}}),B)}var G=Object(D.a)(),P=Object(Q.c)({quote:q}),Y=Object(_.a)({reducer:P,middleware:[].concat(Object(M.a)(Object(_.c)({thunk:!1})),[G])});G.run(F),c.a.render(Object(a.jsx)(N.a,{store:Y,children:Object(a.jsx)(E,{})}),document.getElementById("root"))},72:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.646fcb3d.chunk.js.map